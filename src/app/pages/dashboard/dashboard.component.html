<div class="row">
 
  <div *ngIf="loader">
    <img class="loadercls" src="../../../assets/loader.gif"/>
  </div>
  <div *ngIf="!loader" class="align-dash">
  <div class="col-lg-8">
    <mat-card class="cardWithShadow">
      <mat-card-content class="p-24">
        <div class="d-flex w-100">
          <mat-card-title>Upload any Data Source</mat-card-title>          
        </div>
        <div class="upload">
          <input type="file" accept="zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed/,*.pdf" (change)="OnChangeUpload($event)" class="form-control file-upload"/>
        </div>
        <p>You can even curate questions using AI <a routerLink="/oep/curate" style="text-decoration: undeline;">Click Here</a></p>
        <button mat-flat-button color="primary" class="w-100" (click)="UploadFile()">
          Upload
      </button>
      </mat-card-content>
      <mat-card-footer>
        <p style="color:red">{{dsError}}</p>
      </mat-card-footer>
    </mat-card>
  </div>
 
  <div class="col-lg-4">
    <div class="row">
     
      <div class="col-lg-12 col-sm-6" *ngIf="role!='contributor'">
        <mat-card class="cardWithShadow">
          <mat-card-content class="p-24">
            <mat-card-title>Generate Questions</mat-card-title>
            <div class="row m-t-24">
              <div class="col-7">
                <h4 class="mat-headline-5">Total Generated till date</h4>
                <div class="d-flex align-items-center m-t-16">
                  <div class="mat-body-1 f-w-600 m-l-12">Generate</div>
                  <button
                    mat-mini-fab
                    class="bg-light-success text-success shadow-none icon-27"  routerLink="/oep/curate"
                  >
                    <i-tabler name="arrow-up-right" class="icon-20"></i-tabler>
                    
                  </button>
                </div>

                <div class="d-flex align-items-center m-t-32">
                  <div class="d-flex align-items-center">
                    <i-tabler
                      name="circle-filled"
                      class="text-primary icon-12 d-flex"
                    ></i-tabler>
                    <div class="mat-body-1 m-l-12">Manual</div>
                  </div>
                  <div class="d-flex align-items-center m-l-16">
                    <i-tabler
                      name="circle-filled"
                      class="text-light-primary icon-12 d-flex"
                    ></i-tabler>
                    <div class="mat-body-1 m-l-12">AI Generated</div>
                  </div>
                </div>
              </div>
              <div class="col-5 d-flex align-items-start">
                <apx-chart
                  [series]="yearlyChart.series"
                  [dataLabels]="yearlyChart.dataLabels"
                  [chart]="yearlyChart.chart"
                  [legend]="yearlyChart.legend"
                  [colors]="yearlyChart.colors"
                  [stroke]="yearlyChart.stroke"
                  [tooltip]="yearlyChart.tooltip"
                  [plotOptions]="yearlyChart.plotOptions"
                  [responsive]="yearlyChart.responsive"
                ></apx-chart>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
      
      <div class="col-lg-12 col-sm-6" *ngIf="role!='contributor'">
        <div class="">
          <mat-card class="cardWithShadow">
            <mat-card-content class="p-24">
              <mat-card-title>Recent Progress</mat-card-title>
      
              <div class="timeline m-t-24">
                <div
                  class="timeline-item d-flex overflow-hidden"
                  *ngFor="let stat of stats"
                >
                  <div class="time text-right mat-subtitle-1 f-s-14">
                    {{ stat.time }}
                  </div>
                  <div class="point d-flex align-items-center">
                    <span class="timeline-badge border-{{ stat.color }} m-y-8"></span>
                    <span class="timline-border d-block"></span>
                  </div>
                  <div class="desc">
                    <ng-template [ngIf]="stat.subtext">
                      <span class="mat-subtitle-1 f-s-14 lh-20">{{
                        stat.subtext
                      }}</span>
                    </ng-template>
                    <ng-template [ngIf]="stat.title">
                      <span class="mat-subtitle-1 f-s-14 lh-20 f-w-600 d-block">{{
                        stat.title
                      }}</span>
                    </ng-template>
                    <ng-template [ngIf]="stat.link">
                      <a href="#" class="text-primary text-decoration-none mat-body-1"
                        >#ML-3467</a
                      >
                    </ng-template>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>

 

  <div class="col-lg-8" style="position: relative;" *ngIf="role!='contributor'">
    <mat-card class="cardWithShadow">
      <mat-card-content class="p-24">
        <mat-card-title>Team and Work
          <span><img src="../../../assets/images/icons/arrow-up-right.png" alt="go" style="width:3%;cursor:pointer;" (click)="openTeams()"></span>
        </mat-card-title>
        
        <div class="table-responsive m-t-16">
          <table mat-table [dataSource]="dataSource" class="w-100">
            <!-- Position Column -->
            <ng-container matColumnDef="assigned">
              <th
                mat-header-cell
                *matHeaderCellDef
                class="f-w-600 mat-subtitle-1 f-s-14"
              >
                Assigned
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="d-flex align-items-center">
                  <img
                    [src]="element.imagePath"
                    alt="users"
                    width="40"
                    class="rounded-circle"
                  />
                  <div class="m-l-16">
                    <h6 class="mat-subtitle-1 f-s-14 f-w-600">
                      {{ element.uname }}
                    </h6>
                    <span class="mat-body-1 f-s-12">
                      {{ element.position }}
                    </span>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th
                mat-header-cell
                *matHeaderCellDef
                class="f-w-600 mat-subtitle-1 f-s-14"
              >
                Name
              </th>
              <td mat-cell *matCellDef="let element" class="mat-body-1">
                {{ element.productName }}
              </td>
            </ng-container>

            <!-- Weight Column -->
            <!-- <ng-container matColumnDef="priority">
              <th
                mat-header-cell
                *matHeaderCellDef
                class="f-w-600 mat-subtitle-1 f-s-14"
              >
                Priority
              </th>
              <td mat-cell *matCellDef="let element">
                <ng-template [ngIf]="element.priority == 'low'">
                  <span
                    class="bg-light-accent text-accent rounded f-w-600 p-6 p-y-4 f-s-12"
                  >
                    {{ element.priority | titlecase }}
                  </span>
                </ng-template>
                <ng-template [ngIf]="element.priority == 'medium'">
                  <span
                    class="bg-light-primary text-primary rounded f-w-600 p-6 p-y-4 f-s-12"
                  >
                    {{ element.priority | titlecase }}
                  </span>
                </ng-template>
                <ng-template [ngIf]="element.priority == 'high'">
                  <span
                    class="bg-light-warning text-warning rounded f-w-600 p-6 p-y-4 f-s-12"
                  >
                    {{ element.priority | titlecase }}
                  </span>
                </ng-template>
                <ng-template [ngIf]="element.priority == 'critical'">
                  <span
                    class="bg-light-error text-error rounded f-w-600 p-6 p-y-4 f-s-12"
                  >
                    {{ element.priority | titlecase }}
                  </span>
                </ng-template>
                <ng-template [ngIf]="element.priority == 'moderate'">
                  <span
                    class="bg-light-success text-success rounded f-w-600 p-6 p-y-4 f-s-12"
                  >
                    {{ element.priority | titlecase }}
                  </span>
                </ng-template>
              </td>
            </ng-container> -->

            <!-- Symbol Column -->
            <!-- <ng-container matColumnDef="budget">
              <th
                mat-header-cell
                *matHeaderCellDef
                class="f-w-600 mat-subtitle-1 f-s-14"
              >
                Budget
              </th>
              <td mat-cell *matCellDef="let element" class="mat-body-1">
                ${{ element.budget }}k
              </td>
            </ng-container> -->

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
<div style="" *ngIf="role!='contributor'">
<h2>Products</h2>
<div class="row">
  <div class="col-sm-6 col-lg-3" *ngFor="let country of countryCards">
    <mat-card class="cardWithShadow productcard overflow-hidden">
      <a routerLink="/widgets/cards">
        <img
          src="{{ country.imgSrc }}"
          alt="imgSrc"
          class="w-100"
          style="height:177px"
          mat-card-image
        />
      </a>
      <mat-card-content class="p-b-24 p-t-12 position-relative">
        <mat-card-title class="mat-headline-2 f-s-16 m-b-4">{{
          country.title
        }}</mat-card-title>
        <div class="d-flex align-items-center justify-content-between">
          <div class="m-l-auto d-flex gap-4">
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
</div>


<div class="modal" id="questionModal">
	<article class="modal-container">
		<header class="modal-container-header">
			<h1 class="modal-container-title">
                <img src="../../../../../assets/images/icons/clipboard.png" style="width: 10%;"/>
                Configure Datasource
            </h1>
			<a class="icon-button close" (click)="closeModal('questionModal')">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path fill="currentColor" d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z" />
				</svg>
			</a>
      <div>
        <!-- <h3 style="cursor:pointer;font-weight:bolder" ></h3> -->
        <div class="align-right" *ngIf="modalNext=='templateSelection'" style="float: left;position: absolute;left: 24px;top: 24%;" (click)="goBack()">
          <img class="back-arrow" style="width:10%" src="../../../../../assets/images/icons/arrow-left.png"/>
          <span>Back</span>
      </div>
      </div>
		</header>
		<section class="modal-container-body rtf" *ngIf="modalNext=='configSelection'">
            <label>
              Exam
            </label>
<select id="examselect" class="form-control" (change)="Onselectopt($event)">
  <option value="">Please Select</option>
  <option *ngFor="let exam of examList;let i = index" value="{{formatJSONToString(exam)}}">{{exam.ExamName}}</option>
</select>
            <label>
              Type of Datasource
            </label>
            <select id="dsType" class="form-control" (change)="Onselectopt($event)">
              <option value="">
                Please Select
              </option>
              <option value="chapter_wise">
                Chapter Wise
              </option>
              <option value="subject_wise">
                Subject Wise
              </option>
              <option value="mock_test">
                Mock Test
              </option>
            </select>
          <div *ngIf="dsType=='chapter_wise' || dsType=='subject_wise'">
            <label>
              Select Subject
            </label>
            <select id="subject_select" class="form-control" (change)="Onselectopt($event)">
              <option value="">
                Please Select
              </option>
              <option *ngFor="let subject of SubjectsForExam;" value="{{formatJSONToString(subject)}}">
                {{subject.Subjectname}}
              </option>
            </select>
          </div>
          <!-- Select Chapters on selecting subject -->
          <div *ngIf="dsType=='chapter_wise'">
            <label>
              Select Chapter
            </label>
            <select id="chapter_select" class="form-control" (change)="Onselectopt($event)">
              <option value="">
                Please Select
              </option>
              <option *ngFor="let chapter of ChapterList" value="{{formatJSONToString(chapter)}}">
                {{chapter.ChapterName}}
              </option>
              
            </select>
          </div>
            <label *ngIf="dsType!='mock_test'">
              Types of questions
            </label>
            <select id="qtype" *ngIf="dsType!='mock_test'" class="form-control" (change)="Onselectopt($event)">
              <option value="">Please Select</option>
              <option value="MCQ_Single">MCQ (Single Select)</option>
              <option value="MCQ_Multiple">MCQ (Multiple Select)</option>
              <option value="MCQ_Descriptive">Descriptive</option>
            </select>
            <label>
              Format of datasource
            </label>
            <select id="dsFormat" class="form-control" (change)="Onselectopt($event)">
              <option value="">Please Select</option>
              <option value="pdf">PDF</option>
              <option value="excel">Excel/CSV</option>
              <option value="json">JSON</option>
            </select>
            <input *ngIf="dsFormat=='pdf'" type="text" class="form-control" style="margin-top:3%" (blur)="OnInsertStartPage($event,'startpage')" placeholder="Start Page"/>
            <input type="text" *ngIf="dsFormat=='pdf'" class="form-control" style="margin-top:3%" (blur)="OnInsertStartPage($event,'endpage')" placeholder="End Page"/>
		</section>
    <section class="modal-container-body rtf" *ngIf="modalNext=='templateSelection'" style="display: flex;position: relative;top: 10px;">
      <div style="display:flex;flex-direction: column;">
        <span>Template 1</span>
        <img src="../../../assets/images/templates/template1.png" style="width:75%" />
        <input style="margin: top 3%;" type="radio" [(ngModel)]="templateSelected" value="template1" (select)="OnSelectTemplate($event)"/>
      </div>
      <div style="display:flex;flex-direction: column;">
        <span>Template 2</span>
        <img style="width:75%;" src="../../../assets/images/templates/template2.png" />
        <input type="radio" style="margin-top:3%" [(ngModel)]="templateSelected" value="template2" (select)="OnSelectTemplate($event)"/>
      </div>
      <div style="display:flex;flex-direction: column;">
        <span>Template 3</span>
        <img style="width:75%;" src="../../../assets/images/templates/template3.png" />
        <input type="radio" style="margin-top:3%" [(ngModel)]="templateSelected" value="template3" (select)="OnSelectTemplate($event)"/>
      </div>
      <div style="display:flex;flex-direction: column;">
        <span>Template 4</span>
        <img style="width:75%;" src="../../../assets/images/templates/template4.png" />
        <input type="radio" style="margin-top:3%" [(ngModel)]="templateSelected" value="template4" (select)="OnSelectTemplate($event)"/>
      </div>
      
    </section>
		<footer class="modal-container-footer">
      <p style="color: red;margin-left: 3%;font-size: large;font-weight: bold;">{{uploadError}}</p>
      <button class="nxt-btn col-sm-3" mat-flat-button color="primary" *ngIf="modalNext=='configSelection'" (click)="Next()">Next</button>
			<button class="nxt-btn col-sm-3" mat-flat-button color="primary" *ngIf="modalNext=='templateSelection'" (click)="OnSubmitDS()">Submit</button>
		</footer>
	</article>
</div>
</div>
</div>

